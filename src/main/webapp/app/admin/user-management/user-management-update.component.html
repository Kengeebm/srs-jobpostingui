<div class="container mt--8 pb-5">
    <div class="row justify-content-center">
        <div class="col-lg-12 col-md-12">
            <div class="box bg-secondary shadow border-0">
                <div class="row justify-content-center">
                    <div class="col-10">
                        <form name="editForm" role="form" novalidate (ngSubmit)="save()" #editForm="ngForm">
                            <div class="text-center">
                                <h2>
                                    CREATE OR EDIT USER
                                </h2>
                            </div>
                            <div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <div class="col-4 text-left mb-2 mt--3">
                                            <button class="btn btn-primary" (click)="open(content)"
                                                [disabled]='disableApply'>Back</button>
                                        </div>
                                    </div>
                                </div>
                                <jhi-alert-error></jhi-alert-error>
                                <!-- <div class="form-group" [hidden]="!user.id">
                                    <label>ID</label>
                                    <input type="text" class="form-control" name="id" [(ngModel)]="user.id" readonly>
                                </div> -->

                                <div class="pl-lg-4">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label">Login</label>
                                                <input type="text" class="form-control" name="login"
                                                    #loginInput="ngModel" [(ngModel)]="user.login" required
                                                    minlength="1" maxlength="50" pattern="^[_.@A-Za-z0-9-]*$">

                                                <div *ngIf="loginInput.dirty && loginInput.invalid">
                                                    <small class="form-text text-danger"
                                                        *ngIf="loginInput.errors.required">
                                                        This field is required.
                                                    </small>

                                                    <small class="form-text text-danger"
                                                        *ngIf="loginInput.errors.maxlength">
                                                        This field cannot be longer than 50 characters.
                                                    </small>

                                                    <small class="form-text text-danger"
                                                        *ngIf="loginInput.errors.pattern">
                                                        This field can only contain letters, digits and e-mail
                                                        addresses.
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6" [hidden]="user.id">
                                            <div class="form-group">
                                                <label class="form-control-label">Password</label>
                                                <input type="password" class="form-control" name="password"
                                                    #passwordInput="ngModel" [(ngModel)]="user.password" minlength="6"
                                                    required maxlength="254" password>

                                                <div *ngIf="passwordInput.dirty && passwordInput.invalid">
                                                    <small class="form-text text-danger"
                                                        *ngIf="passwordInput.errors.required">
                                                        This field is required.
                                                    </small>

                                                    <small class="form-text text-danger"
                                                        *ngIf="passwordInput.errors.maxlength">
                                                        This field cannot be longer than 100 characters.
                                                    </small>

                                                    <small class="form-text text-danger"
                                                        *ngIf="passwordInput.errors.minlength">
                                                        This field is required to be at least 6 characters.
                                                    </small>

                                                    <small class="form-text text-danger"
                                                        *ngIf="passwordInput.errors.email">
                                                        Your email is invalid.
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label">First Name</label>
                                                <input type="text" class="form-control" name="firstName"
                                                    #firstNameInput="ngModel" [(ngModel)]="user.firstName"
                                                    maxlength="50">

                                                <div *ngIf="firstNameInput.dirty && firstNameInput.invalid">
                                                    <small class="form-text text-danger"
                                                        *ngIf="firstNameInput.errors.maxlength">
                                                        This field cannot be longer than 50 characters.
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label">Last Name</label>
                                                <input type="text" class="form-control" name="lastName"
                                                    #lastNameInput="ngModel" [(ngModel)]="user.lastName" maxlength="50">

                                                <div *ngIf="lastNameInput.dirty && lastNameInput.invalid">
                                                    <small class="form-text text-danger"

                                                        *ngIf="lastNameInput.errors.maxlength">

                                                        This field cannot be longer than 50 characters.
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label">Email</label>
                                                <input type="email" class="form-control" name="email"
                                                    #emailInput="ngModel" [(ngModel)]="user.email" minlength="5"
                                                    required maxlength="254" email>

                                                <div *ngIf="emailInput.dirty && emailInput.invalid">
                                                    <small class="form-text text-danger"
                                                        *ngIf="emailInput.errors.required">
                                                        This field is required.
                                                    </small>

                                                    <small class="form-text text-danger"
                                                        *ngIf="emailInput.errors.maxlength">
                                                        This field cannot be longer than 100 characters.
                                                    </small>

                                                    <small class="form-text text-danger"
                                                        *ngIf="emailInput.errors.minlength">
                                                        This field is required to be at least 5 characters.
                                                    </small>

                                                    <small class="form-text text-danger"
                                                        *ngIf="emailInput.errors.email">
                                                        Your email is invalid.
                                                    </small>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label" for="input-projectCode">Project Code
                                                </label>
                                                <select type="text" id="input-project" class="form-control" required
                                                    name="projectCode" #projectCode="ngModel"
                                                    [(ngModel)]="user.projectCode">
                                                    <option *ngFor="let project of projectList"
                                                        value={{project.projectCode}}>
                                                        {{project.projectCode}}
                                                    </option>
                                                    <div *ngIf="projectCode.dirty && projectCode.invalid">
                                                        <small class="form-text text-danger"
                                                            *ngIf="projectCode.errors.required">
                                                            This field is required.
                                                        </small>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    for="input-reportingManagerId">Reporting Manager Name
                                                    <span class="star"> *</span></label>
                                                <select type="text" id="input-reportingManagerName" class="form-control"
                                                    required name="reportingManagerName" #reportingManagerName="ngModel"
                                                    [(ngModel)]="user.reportingManagerName"
                                                    (click)="getReportingManagerEmail(user.reportingManagerName)">
                                                    <option *ngFor="let report of reportingManagerList"
                                                        value={{report.reportingManagerName}}>
                                                        {{report.reportingManagerName}}
                                                    </option>
                                                </select>
                                                <div *ngIf="reportingManagerName.dirty && reportingManagerName.invalid">
                                                    <small class="form-text text-danger"
                                                        *ngIf="reportingManagerName.errors.required">
                                                        This field is required.
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label">Reporting Manger Email</label>
                                                <input type="email" class="form-control" name="reportingManagerEmail"
                                                    #reportingManagerEmailInput="ngModel"
                                                    [(ngModel)]="user.reportingManagerEmail" required readonly>

                                                <div
                                                    *ngIf="reportingManagerEmailInput.dirty && reportingManagerEmailInput.invalid">
                                                    <small class="form-text text-danger"
                                                        *ngIf="reportingManagerEmailInput.errors.required">
                                                        This field is required.
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label">Notification To</label>
                                                <select class="form-control" name="notificationTo"
                                                    [(ngModel)]="user.notificationTo">
                                                    <option *ngFor="let report of reportingManagerList"
                                                        value={{report.reportingManagerEmail}}>
                                                        {{report.reportingManagerEmail}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-control-label">Profiles</label>
                                                <select class="form-control" multiple name="authority"
                                                    [(ngModel)]="user.authorities">
                                                    <option *ngFor="let authority of authorities" [value]="authority">
                                                        {{authority}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-check">
                                                <label class="form-check-label" for="activated">
                                                    <input class="form-check-input" [disabled]="user.id === null"
                                                        type="checkbox" id="activated" name="activated"
                                                        [(ngModel)]="user.activated">
                                                    <span class="form-control-label">Activated</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <button type="button" class="btn btn-secondary" (click)="previousState()">
                                            <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span>Cancel</span>
                                        </button>
                                        <button type="submit" [disabled]="editForm.form.invalid || isSaving"
                                            class="btn btn-primary">
                                            <fa-icon [icon]="'save'"></fa-icon>&nbsp;<span>Save</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>